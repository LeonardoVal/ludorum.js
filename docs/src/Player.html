<!DOCTYPE html><html lang="en"><head><title>src\Player</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../"><meta name="groc-document-path" content="src\Player"><meta name="groc-project-path" content="src\Player.js"><link rel="stylesheet" type="text/css" media="all" href="../assets/style.css"><script type="text/javascript" src="../assets/behavior.js"></script><body><div id="meta"><div class="file-path">src\Player.js</div></div><div id="document"><div class="segment"><div class="comments "><div class="wrapper"><h2 id="classplayer">Class <code>Player</code></h2>

<p>Player is the base type for all playing agents. Basically, playing a game means
choosing a move from all available ones, each time the game enables the player 
to do so.</p></div></div><div class="code"><div class="wrapper"><span class="kd">var</span> <span class="nx">Player</span> <span class="o">=</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">Player</span> <span class="o">=</span> <span class="nx">declare</span><span class="p">({</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>The default constructor takes only its <code>name</code> from the given <code>params</code>.
This is an abstract class that is meant to be extended.</p></div></div><div class="code"><div class="wrapper">  <span class="nx">constructor</span><span class="o">:</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">__PlayerCount__</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// Used by the Player&#39;s default naming.</span>
    <span class="k">return</span> <span class="kd">function</span> <span class="nx">Player</span><span class="p">(</span><span class="nx">params</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">initialize</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">string</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">defaultValue</span><span class="o">:</span> <span class="s1">&#39;Player&#39;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">__PlayerCount__</span><span class="o">++</span><span class="p">),</span> <span class="nx">coerce</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span>
    <span class="p">};</span>
  <span class="p">})(),</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>A player is asked to choose a move by calling 
<code>Player.decision(game, role)</code>. The result is the selected move if it can be 
obtained synchronously, else a future is returned.</p></div></div><div class="code"><div class="wrapper">  <span class="nx">decision</span><span class="o">:</span> <span class="kd">function</span> <span class="nx">decision</span><span class="p">(</span><span class="nx">game</span><span class="p">,</span> <span class="nx">role</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">__moves__</span><span class="p">(</span><span class="nx">game</span><span class="p">,</span> <span class="nx">role</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span> <span class="c1">// Indeed not a very thoughtful base implementation. </span>
  <span class="p">},</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>To help implement the decision, <code>Player.__moves__(game, player)</code> gets
the moves in the game for the player. It also checks if there are any moves,
and if it not so an error is risen.</p></div></div><div class="code"><div class="wrapper">  <span class="nx">__moves__</span><span class="o">:</span> <span class="kd">function</span> <span class="nx">__moves__</span><span class="p">(</span><span class="nx">game</span><span class="p">,</span> <span class="nx">role</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">moves</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">moves</span><span class="p">();</span>
    <span class="nx">raiseIf</span><span class="p">(</span><span class="o">!</span><span class="nx">moves</span> <span class="o">||</span> <span class="o">!</span><span class="nx">moves</span><span class="p">[</span><span class="nx">role</span><span class="p">]</span> <span class="o">||</span> <span class="nx">moves</span><span class="p">[</span><span class="nx">role</span><span class="p">].</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">,</span> 
      <span class="s2">&quot;Player &quot;</span><span class="p">,</span> <span class="nx">role</span><span class="p">,</span> <span class="s2">&quot; has no moves for game &quot;</span><span class="p">,</span> <span class="nx">game</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">moves</span><span class="p">[</span><span class="nx">role</span><span class="p">];</span>
  <span class="p">},</span>
  </div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Before starting a <a href="Match.html">match</a>, all players are asked to join
by calling <code>Player.participate(match, role)</code>. This allows the player to
prepare properly. If this implies building another instance of the player 
object, it must be returned in order to participate in the match.</p></div></div><div class="code"><div class="wrapper">  <span class="nx">participate</span><span class="o">:</span> <span class="kd">function</span> <span class="nx">participate</span><span class="p">(</span><span class="nx">match</span><span class="p">,</span> <span class="nx">role</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span>
  </div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h3 id="conversions-amp-presentations">Conversions &amp; presentations</h3></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Players can also be serialized, pretty much in the same way 
<a href="Game.html">games</a> are. <code>Player.__serialize__()</code> returns an array, where the 
first element should be the name of the game, and the rest the arguments to 
call the player's constructor in order to rebuild this player's state.</p></div></div><div class="code"><div class="wrapper">  <span class="nx">__serialize__</span><span class="o">:</span> <span class="kd">function</span> <span class="nx">__serialize__</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">}];</span>
  <span class="p">},</span>
  </div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>The string representation of the player is derived straight from its
serialization.</p></div></div><div class="code"><div class="wrapper">  <span class="nx">toString</span><span class="o">:</span> <span class="kd">function</span> <span class="nx">toString</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">__serialize__</span><span class="p">();</span>
    <span class="k">return</span> <span class="nx">args</span><span class="p">.</span><span class="nx">shift</span><span class="p">()</span> <span class="o">+</span><span class="s1">&#39;(&#39;</span><span class="o">+</span> <span class="nx">args</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span> <span class="o">+</span><span class="s1">&#39;)&#39;</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span> <span class="c1">// declare Player.</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>The namespace <code>ludorum.players</code> contains all kinds of players provided by
this library: artificial intelligences, user interface proxies and others.</p></div></div><div class="code"><div class="wrapper"><span class="kd">var</span> <span class="nx">players</span> <span class="o">=</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">players</span> <span class="o">=</span> <span class="p">{};</span></div></div></div></div></body></html>