<!-- ludorum/tests/tester.html:
	Test case runner in HTML so the Javascript can be tested in browser engines.

	@author <a href="mailto:leonardo.val@creatartis.com">Leonardo Val</a>
	@licence MIT Licence
-->
<html><head>
	<title>Ludorum tester.</title>
	<meta charset="UTF-8"/>
	<link rel="stylesheet" type="text/css" href="tester.css"/>
	<script src="lib/require.js"></script>
</head><body onload="main();">
	<h3>Ludorum tester.</h3>
	<div id="log" class="log"></div>
</td></tr></table>
<script type="text/javascript">
	function main() { "use strict";
		var TESTS = ['test_games', 'test_players', 'test_tournaments'];
		require.config({
			paths: {
				"basis": "lib/basis",
				"ludorum": "../ludorum"
			},
		});
		require(['basis'], function (basis) {
			basis.Logger.ROOT
				.appendToHtml("log")
				.format = basis.Logger.ROOT.htmlFormat();
			basis.Future.sequence(TESTS, function (path) {
				basis.Logger.ROOT.info("Running test at <", path, ">.");
				return basis.Future.imports(path).then(function (imports) {
					var verifier = imports[0];
					verifier.logger = basis.Logger.ROOT;	
					return verifier.run();
				});
			}).then(function () {
				basis.Logger.ROOT.info("Fin.");
			});
		});
	}	
</script>
</body></html>