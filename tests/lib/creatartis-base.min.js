//! creatartis-base 0.1.6

!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["sermat"],b):"object"==typeof exports&&module.exports?module.exports=b(require("sermat")):a.base=b(a.Sermat)}(this,function __init__(Sermat){"use strict";var exports={__package__:"creatartis-base",__name__:"base",__init__:__init__,__dependencies__:[],__SERMAT__:{include:[]}},global=exports.global=function(){var a=Function;return a("return this;")()}(),raise=exports.raise=function(){throw new Error(Array.prototype.slice.call(arguments,0).join(""))},raiseIf=exports.raiseIf=function(a){a&&raise.apply(this,Array.prototype.slice.call(arguments,1))},callStack=exports.callStack=function(a){if(a)return(a.stack||a.stacktrace||"").split("\n");try{throw new Error}catch(b){a=b}return(a.stack||a.stacktrace||"").split("\n").slice(1)},obj=exports.obj=function(){for(var a={},b=0;b<arguments.length;b+=2)a[arguments[b]+""]=arguments[b+1];return a},copy=exports.copy=function(a){var b,c,d=1;for(arguments.length<2&&(a={},d=0);d<arguments.length;d++){c=arguments[d];for(b in c)c.hasOwnProperty(b)&&!a.hasOwnProperty(b)&&(a[b]=c[b])}return a};Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");if(arguments.length<1)return this;var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),String.prototype.repeat||(String.prototype.repeat=function(a){return a=0|a,0>=a?"":1&a?this+this.repeat(a-1):(this+this).repeat(a>>1)});var objects=exports.objects=function(){var a=this.subconstructor=function(a,b){return"function"!=typeof b&&(b=function(){a.apply(this,arguments)}),b.prototype=Object.create(a.prototype),b.prototype.constructor=b,Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a,b},b=this.addMember=function(a,b,c,d){var e,f=b.split(/\s+/);b=f.pop(),e=f.indexOf("dual")>=0?[a,a.prototype]:f.indexOf("static")>=0?[a]:[a.prototype],e.forEach(function(a){return d||"undefined"==typeof a[b]?f.indexOf("property")>=0?Object.defineProperty(a,b,c):f.indexOf("const")>=0?Object.defineProperty(a,b,{get:function(){return c},set:function(){throw new Error(b+" is readonly!")},enumerable:!0,configurable:!1}):a[b]=c:void 0})},c=this.addMembers=function(a,c,d){Object.keys(c).map(function(e){b(a,e,c[e],d)})};exports.declare=this.declare=function(){var d=Array.prototype.slice.call(arguments),e=d.length>1?d.shift():Object,f=d.length>0?d.pop():{},g=a(e,f.hasOwnProperty("constructor")?f.constructor:void 0),h=f[""];return Object.keys(f).map(function(a){""!==a&&"constructor"!==a&&b(g,a,f[a],!0)}),d.forEach(function(a){"function"==typeof a&&(a=a.prototype),c(g,a,!1)}),"function"==typeof h&&h.apply(g),g},this.unimplemented=function(a,b){return function(){throw new Error((a||this.constructor.name)+"."+b+" not implemented! Please override.")}};return this}.call({}),declare=objects.declare,XML_ENTITIES={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&apos;"},Text=exports.Text=declare({constructor:function(){this.clear()},clear:function(){var a=this.text;return this.text="",a},add:function(){for(var a=0;a<arguments.length;a++)this.text+=arguments[a]},toString:function(){return this.text},escapeXML:function(a){var b=this.XML_ENTITIES;return(a+"").replace(/[&<>"']/g,function(a){return b[a]})},XML_ENTITIES:XML_ENTITIES,"static XML_ENTITIES":XML_ENTITIES,addXML:function(){for(var a=0;a<arguments.length;a++)this.text+=this.escapeXML(arguments[a])},escapeRegExp:function(a){return(a+"").replace(/[\-\[\]{}()*+?.^$\\]/g,"\\$&")},formatDate:function(a,b,c){a=a||new Date;var d=Text.lpad;return b?b.replace(/(y+|m+|d+|h+|H+|n+|s+|S+|a+|A+|"[^"]*")/g,function(b){switch(b.charAt(0)){case"y":return d((c?a.getUTCFullYear():a.getFullYear())+"",b.length,"0");case"m":return d((c?a.getUTCMonth():a.getMonth())+1+"",b.length,"0");case"d":return d((c?a.getUTCDate():a.getDate())+"",b.length,"0");case"h":return d((c?a.getUTCHours():a.getHours())+"",b.length,"0");case"H":return d((c?a.getUTCHours():a.getHours())%12+"",b.length,"0");case"n":return d((c?a.getUTCMinutes():a.getMinutes())+"",b.length,"0");case"s":return d((c?a.getUTCSeconds():a.getSeconds())+"",b.length,"0");case"S":return d((c?a.getUTCMilliseconds():a.getMilliseconds())+"",b.length,"0");case"a":return["am","pm"][~~((c?a.getUTCHours():a.getHours())/12)].substr(0,b.length);case"A":return["AM","PM"][~~((c?a.getUTCHours():a.getHours())/12)].substr(0,b.length);case'"':return b.substr(1,b.length-2);default:return b}}):a.toString()},addDate:function(a,b,c){this.text+=this.formatDate(a,b,c)},"static lpad":function(a,b,c){return isNaN(b)||a.length>=b?a:(c=(c||" ")+"",(c.repeat((b-a.length)/c.length+1)+a).substr(-b))},"static rpad":function(a,b,c){return isNaN(b)||a.length>=b?a:(c=(c||" ")+"",(a+c.repeat((b-a.length)/c.length+1)).substr(0,b))},"static hashCode":function(a){for(var b=0,c=a.length,d=0;c>d;++d)b=31*b+a.charCodeAt(d)&2147483647;return b}});Text.escapeXML=Text.prototype.escapeXML,Text.escapeRegExp=Text.prototype.escapeRegExp,Text.formatDate=Text.prototype.formatDate;var math=exports.math={};math.clamp=function(a,b,c){return Math.min(c,Math.max(b,a))},math.sign=function(a){return a=+a,0===a||isNaN(a)?a:a>0?1:-1};var factorial=math.factorial=function(a,b){if(a=0|a,b=Math.max(0,0|b),0>a)return NaN;for(var c=1;a>b;--a)c*=a;return c};math.combinations=function(a,b){return factorial(a,b)/factorial(a-b)},math.gauss_pdf=function(a,b,c){b=isNaN(b)?0:+b,c=isNaN(c)?1:+c;var d=Math.sqrt(c);return Math.exp(-Math.pow(x-b,2)/(2*c))/d*Math.sqrt(2*Math.PI)},math.gauss_erfc=function(a){var b=Math.abs(a),c=1/(1+.5*b),d=c*Math.exp(-b*b-1.26551223+c*(1.00002368+c*(.37409196+c*(.09678418+c*(-.18628806+c*(.27886807+c*(-1.13520398+c*(1.48851587+c*(-.82215223+.17087277*c)))))))));return a>=0?d:2-d},math.gauss_cdf=function(a,b,c){b=isNaN(b)?0:+b,c=isNaN(c)?1:+c;var d=Math.sqrt(c);return math.gauss_erfc(-(a-b)/(d*Math.sqrt(2)))/2};var Type=exports.Type=declare({constructor:function(a){if(a=a||{},"function"==typeof a.isType&&(this.isType=a.isType),"function"==typeof a.isCompatible&&(this.isCompatible=a.isCompatible),"function"==typeof a.coerce&&(this.coerce=a.coerce),"string"==typeof a.toString){var b=a.toString;this.toString=function(){return b}}},isType:function(a){return!1},isCompatible:function(a){return this.isType(a)},coerce:function(a){throw this.incompatibleError(a)},incompatibleError:function(a){return new TypeError("Value "+a+" is not compatible with type "+this+".")}}),types=exports.types={};types.BOOLEAN=new Type({isType:function(a){return"boolean"==typeof a||void 0!==a&&null!==a&&a.constructor===Boolean},isCompatible:function(a){return!0},coerce:function(a){return!!a},toString:"boolean"}),types.NUMBER=new Type({isType:function(a){return"number"==typeof a||void 0!==a&&null!==a&&a.constructor===Number},isCompatible:function(a){return!0},coerce:function(a){return+a},toString:"number"}),types.STRING=new Type({isType:function(a){return"string"==typeof a||void 0!==a&&null!==a&&a.constructor===String},isCompatible:function(a){return!0},coerce:function(a){return""+a},toString:"string"}),types.FUNCTION=new Type({isType:function(a){return"function"==typeof a||void 0!==a&&null!==a&&a.constructor===Function},toString:"function"}),types.INTEGER=new Type({isType:function(a){return(0|a)===a},isCompatible:function(a){return!isNaN(a)},coerce:function(a){return 0|+a},toString:"integer"}),types.CHARACTER=new Type({isType:function(a){return types.STRING.isType(a)&&1===a.length},isCompatible:function(a){return(""+a).length>0},coerce:function(a){return(""+a).charAt(0)},toString:"character"}),types.OBJECT=new Type({isType:function(a){return"object"==typeof a},isCompatible:function(a){return"function"!=typeof a},coerce:function(a){switch(typeof a){case"function":throw this.incompatibleError(a);case"object":return a;default:return Object(a)}},toString:"object"});var ObjectType=types.ObjectType=declare(Type,{constructor:function(a){Type.call(this,{}),a.hasOwnProperty("constructor")&&"function"==typeof def.constructor?(this.instanceOf=a.constructor,delete a.constructor):this.instanceOf=null,this.members=a.members||{}},isType:function(a){if("object"!=typeof a)return!1;if(this.instanceOf&&!(a instanceof this.instanceOf))return!1;for(var b in this.members)if(!this.members[b].isType(a[b]))return!1;return!0},isCompatible:function(a){if("object"!=typeof a)return!1;if(this.instanceOf&&!(a instanceof this.instanceOf))return!1;for(var b in this.members)if(!this.members[b].isCompatible(a[b]))return!1;return!0},coerce:function(a){var b=this.instanceOf?new this.instanceOf(a):{};for(var c in this.members)b[c]=this.members[c].coerce(a[c]);return b}});types.ARRAY=new Type({isType:function(a){return Array.isArray(a)},isCompatible:function(a){return this.isType(a)||"string"==typeof a},coerce:function(a){if(this.isType(a))return a;if("string"==typeof a)return a.split("");throw this.incompatibleError(a)},toString:"array"});var ArrayType=types.ArrayType=declare({constructor:function(a,b){Type.call(this,{}),a?Array.isArray(a)?(this.elementTypes=a,this.length=isNaN(b)?this.elementTypes.length:Math.max(+b,this.elementTypes.length)):(this.elementTypes=[a],this.length=+b):(this.elementTypes=[],this.length=+b)},isType:function(a){if(!Array.isArray(a)||!isNaN(this.length)&&a.length!==this.length)return!1;if(this.elementTypes)for(var b,c=0,d=a.length;d>c;c++)if(b=this.elementTypes[Math.min(this.elementTypes.length-1,c)],!b.isType(a[c]))return!1;return!0},isCompatible:function(a){if(!Array.isArray(a)){if("string"!=typeof a)return!1;a=a.split("")}if(!isNaN(this.length)||a.length<+this.length)return!1;if(this.elementTypes)for(var b,c=0,d=a.length;d>c;c++)if(b=this.elementTypes[Math.min(this.elementTypes.length-1,c)],!b.isCompatible(a[c]))return!1;return!0},coerce:function(a){if(Array.isArray(a))a=a.slice();else{if("string"!=typeof a)throw this.incompatibleError(a);a=a.split("")}if(!isNaN(this.length))if(a.length>this.length)a=a.slice(0,this.length);else if(a.length<this.length)throw this.incompatibleError(a);if(this.elementTypes)for(var b,c=0,d=a.length;d>c;c++)b=this.elementTypes[Math.min(this.elementTypes.length-1,c)],a[c]=b.coerce(a[c]);return a}}),Initializer=exports.Initializer=declare({constructor:function(a,b){this.subject=a||{},this.args=b||{}},get:function(a,b){var c,d;if(b=b||{},this.args.hasOwnProperty(a))c=this.args[a];else{if(!b.hasOwnProperty("defaultValue"))throw new Error(b.missingValueError||"Missing argument <"+a+">!");c=b.defaultValue}if(d=b.type,d&&!d.isType(c)){if(!b.coerce)throw new Error(b.typeMismatchError||"Value for <"+a+"> must be a "+d+"!");c=d.coerce(c)}if(b.regexp&&!b.regexp.exec(c))throw new Error(b.invalidValueError||"Value <"+c+"> for <"+a+"> does not match "+b.regexp+"!");if(b.hasOwnProperty("minimum")&&b.minimum>c)throw new Error(b.invalidValueError||"Value <"+c+"> for <"+a+"> must be greater than or equal to "+b.minimum+"!");if(b.hasOwnProperty("maximum")&&b.maximum<c)throw new Error(b.invalidValueError||"Value <"+c+"> for <"+a+"> must be less than or equal to "+b.maximum+"!");return"function"==typeof b.check&&b.check.call(this.subject,c,a,b),c},attr:function(a,b){b=b||{};try{if(b.hasOwnProperty("overwrite")&&!b.overwrite&&this.subject.hasOwnProperty(a))throw new Error(b.attrOverwriteError||"Attribute <"+a+"> is already defined!");this.subject[a]=this.get(a,b)}catch(c){if(!b.ignore)throw c}return this},bool:function(a,b){return b=b||{},b.type=types.BOOLEAN,this.attr(a,b)},string:function(a,b){return b=b||{},b.type=types.STRING,this.attr(a,b)},number:function(a,b){return b=b||{},b.type=types.NUMBER,this.attr(a,b)},integer:function(a,b){return b=b||{},b.type=types.INTEGER,this.attr(a,b)},func:function(a,b){return b=b||{},b.type=types.FUNCTION,this.attr(a,b)},array:function(a,b){return b=b||{},b.hasOwnProperty("length")||b.hasOwnProperty("elementType")?b.type=new types.ArrayType(b.elementType,b.length):b.type=types.ARRAY,this.attr(a,b)},object:function(a,b){return b=b||{},b.type=types.OBJECT,this.attr(a,b)}}),initialize=exports.initialize=function(a,b){return new Initializer(a,b)},STOP_ITERATION=new Error("Sequence has ended."),Iterable=exports.Iterable=declare({constructor:function a(b){if(null===b||void 0===b)throw new Error("Iterable source is null or undefined.");"function"==typeof b?this.__iter__=b:"string"==typeof b?this.__iter__=a.__iteratorFromString__(b):Array.isArray(b)?this.__iter__=a.__iteratorFromArray__(b):"object"==typeof b?"function"==typeof b.__iter__?this.__iter__=b.__iter__.bind(b):this.__iter__=a.__iteratorFromObject__(b):this.__iter__=a.__iteratorSingleton__(b)},"dual STOP_ITERATION":STOP_ITERATION,"dual stop":function(){throw STOP_ITERATION},"dual catchStop":function(a){if(a!==STOP_ITERATION)throw a},"static __iteratorFromArray__":function(a){return function(){var b=0;return function(){if(b<a.length)return a[b++];throw STOP_ITERATION}}},"static __iteratorFromString__":function(a){return function(){var b=0;return function(){if(b<a.length)return a.charAt(b++);throw STOP_ITERATION}}},"static __iteratorFromObject__":function(a){return function(){var b=Object.keys(a);return function(){if(b.length>0){var c=b.shift();return[c,a[c]]}throw STOP_ITERATION}}},"static __iteratorSingleton__":function(a){return function(){var b=!1;return function(){if(b)throw STOP_ITERATION;return b=!0,a}}},isEmpty:function(){try{return this.__iter__()(),!1}catch(a){return this.catchStop(a),!0}},count:function(){var a=0;return this.forEach(function(b){a++}),a},length:function(){return this.count()},indexOf:function(a,b){b=0|b;var c,d=this.__iter__(),e=0;try{for(c=d();!0;c=d(),++e)if(e>=b&&c===a)return e}catch(f){this.catchStop(f)}return-1},indicesOf:function(a,b){return b=0|b,this.filter(function(c,d){return d>=b&&c===a},function(a,b){return b})},indexWhere:function(a,b){b=0|b;var c,d=this.__iter__(),e=0;try{for(c=d();!0;c=d(),++e)if(e>=b&&a(c,e))return e}catch(f){this.catchStop(f)}return-1},indicesWhere:function(a,b){return b=0|b,this.filter(function(c,d){return d>=b&&a(c)},function(a,b){return b})},forEach:function(a,b){var c,d,e=this.__iter__(),f=0;try{for(c=e();!0;c=e(),f++)b&&!b(c,f)||(d=a(c,f))}catch(g){this.catchStop(g)}return d},forEachApply:function(a,b,c){return c=c||this,this.forEach(function(b,d){return a.apply(c,b.concat([d]))},b)},map:function(a,b){var c=this;return new Iterable(function(){var d,e=c.__iter__(),f=-1;return function(){for(d=e();!0;d=e())if(f++,d=a?a(d,f):d,!b||b(d,f))return d;throw STOP_ITERATION}})},mapApply:function(a,b,c){return c=c||this,this.map(function(b,d){return a.apply(c,b.concat([d]))},b)},select:function(){function a(b,c){if(Array.isArray(c))return c.map(a.bind(null,b));if("object"==typeof c){var d={};return Object.keys(c).forEach(function(e){d[e]=a.call(null,b,c[e])}),d}return"function"==typeof c?c(b):b[c]}return function(b){return this.map(function(c){return a(c,b)})}}(),filter:function(a,b){var c=this;return new Iterable(function(){var d,e=c.__iter__(),f=-1;return function(){for(;;)if(d=e(),f++,a?a(d,f):d)return b?b(d,f):d;throw STOP_ITERATION}})},filterApply:function(a,b,c){return c=c||this,this.filter(function(b,d){return a.apply(c,b.concat([d]))},b&&function(a,d){return b.apply(c,a.concat([d]))})},takeWhile:function(a){var b=this;return new Iterable(function(){var c=b.__iter__(),d=0;return function(){if(d>=0){var e=c();if(a(e,d))return d++,e;d=-(1/0)}b.stop()}})},take:function(a){return a=isNaN(a)?1:0|a,this.takeWhile(function(b,c){return a>c})},dropWhile:function(a){var b=this;return new Iterable(function(){var c=b.__iter__(),d=0,e=!0;return function(){var b;do b=c(),e=e&&a(b,d),d++;while(e);return b}})},drop:function(a){return a=isNaN(a)?1:0|a,this.dropWhile(function(b,c){return a>c})},head:function(a){try{return this.__iter__()()}catch(b){if(this.catchStop(b),arguments.length<1)throw new Error("Tried to get the head value of an empty Iterable.");return a}},tail:function(){var a=this;return new Iterable(function(){var b=a.__iter__();try{b()}catch(c){throw this.catchStop(c),new Error("Tried to get the tail of an empty Iterable.")}return b})},last:function(a){var b,c=!0,d=this.__iter__();try{for(c=!0;!0;c=!1)b=d()}catch(e){if(this.catchStop(e),c){if(arguments.length<1)throw new Error("Tried to get the last value of an empty Iterable.");return a}return b}},init:function(){var a=this;return new Iterable(function(){var b,c=a.__iter__();try{b=c()}catch(d){throw this.catchStop(d),new Error("Tried to get the init of an empty Iterable.")}return function(){var a=b;return b=c(),a}})},greater:function(a){a="function"==typeof a?a:function(a){return+a};var b,c=-(1/0),d=[];return this.forEach(function(e){b=a(e),b>c?(c=b,d=[e]):c==b&&d.push(e)}),d},lesser:function(a){a="function"==typeof a?a:function(a){return+a};var b,c=1/0,d=[];return this.forEach(function(e){b=a(e),c>b?(c=b,d=[e]):c==b&&d.push(e)}),d},sample:function(a,b){if(a=0|a,1>a)return Iterable.EMPTY;b=b||Randomness.DEFAULT;var c=[];return this.forEach(function(d,e){for(var f=b.random(),g=c.length;g>0&&c[g-1][0]<f;--g);for(c.splice(g,0,[f,d,e]);c.length>a;)c.pop()}),c.sort(function(a,b){return a[2]-b[2]}),new Iterable(c.map(function(a){return a[1]}))},foldl:function(a,b){var c,d=this.__iter__();try{for(b=void 0===b?d():b,c=d();!0;c=d())b=a(b,c)}catch(e){this.catchStop(e)}return b},scanl:function(a,b){var c=this;return new Iterable(function(){var d,e=c.__iter__(),f=-1;return function(){return f++,d=0===f?void 0===b?e():b:a(d,e())}})},foldr:function(a,b){function c(b,c){return a(c,b)}return this.reverse().foldl(c,b)},scanr:function(a,b){function c(b,c){return a(c,b)}return this.reverse().scanl(c,b)},sum:function(a){var b=isNaN(a)?0:+a;return this.forEach(function(a){b+=+a}),b},min:function(a){var b=isNaN(a)?1/0:+a;return this.forEach(function(a){a=+a,b>a&&(b=a)}),b},max:function(a){var b=isNaN(a)?-(1/0):+a;return this.forEach(function(a){a=+a,a>b&&(b=a)}),b},all:function(a,b){a="function"==typeof a?a:function(a){return!!a};var c=!0;return this.forEach(function(d,e){if(!a(d,e)&&(c=!1,!b))throw STOP_ITERATION}),c},any:function(a,b){a="function"==typeof a?a:function(a){return!!a};var c=!1;return this.forEach(function(d,e){if(a(d,e)&&(c=!0,!b))throw STOP_ITERATION}),c},join:function(a){var b="";return a=""+(a||""),this.forEach(function(c,d){b+=0===d?c:a+c}),b},toArray:function(a){return a=a||[],this.forEach(function(b){a.push(b)}),a},toObject:function(a){return a=a||{},this.forEach(function(b){a[b[0]]=b[1]}),a},reverse:function(){return new Iterable(this.toArray().reverse())},sorted:function(a){return new Iterable(this.toArray().sort(a))},permutations:function(a){a=0|a;var b=this.toArray(),c=b.length;if(1>a||a>c)return Iterable.EMPTY;var d=math.factorial(c)/math.factorial(c-a);return new Iterable(function(){var e=0,f=Iterable.range(c).toArray();return function(){if(d>e){for(var g=new Array(a),h=f.slice(),i=e,j=0;a>j;++j)g[j]=b[h.splice(i%(c-j),1)[0]],i=i/(c-j)|0;return++e,g}throw STOP_ITERATION}})},combinations:function(a){a=0|a;var b=this.toArray(),c=b.length;return 1>a||a>c?Iterable.EMPTY:new Iterable(function(){var d=Iterable.range(a).toArray(),e=d.map(function(a){return b[a]});return function(){if(!e)throw STOP_ITERATION;for(var f=e,g=a-1;g>=0&&d[g]===g+c-a;--g);if(0>g)e=null;else{d[g]+=1;for(var h=g+1;a>h;++h)d[h]=d[h-1]+1;e=d.map(function(a){return b[a]})}return f}})},slices:function(a){var b=this;return a=isNaN(a)||1>a?1:0|a,new Iterable(function(){var c,d=b.__iter__();return function(){c=[];try{for(var b=0;a>b;++b)c.push(d())}catch(e){if(e!==STOP_ITERATION)throw e}if(c.length>0)return c;throw STOP_ITERATION}})},groupBy:function(a){var b=this;return new Iterable(function(){var c,d=b.__iter__(),e=null;try{e=[d()],c=a?a(e[0]):e[0]}catch(f){b.catchStop(f)}return function(){var f,g,h;if(e)for(;;)try{if(f=d(),g=a?a(f):f,g!==c)return h=[c,e],c=g,e=[f],h;e.push(f)}catch(i){return b.catchStop(i),h=[c,e],e=null,h}else b.stop()}})},groupAll:function(){function a(a){return a+""}function b(a,b){return a=a||[],a.push(b),a}return function(c,d){var e={};return c=c||a,d=d||b,this.forEach(function(a,b){var f=c(a,b);e[f]=d(e[f],a,b)}),e}}(),zip:function(){var a=Array.prototype.slice.call(arguments).map(iterable);return a.unshift(this),new Iterable(function(){var b=a.map(function(a){return a.__iter__()});return function(){return b.map(function(a){return a()})}})},"static zip":function(a){return a=a?iterable(a):this.EMPTY,this.prototype.zip.apply(a,Array.prototype.slice.call(arguments,1))},product:function(){var a=Array.prototype.slice.call(arguments).map(iterable);return a.unshift(this),new Iterable(function(){var b,c;return function(){if(b){if(!c)throw STOP_ITERATION;for(var d=b.length-1;d>=0;--d)try{c[d]=b[d]();break}catch(e){if(!(d>0&&e===STOP_ITERATION))throw c=null,e;b[d]=a[d].__iter__(),c[d]=b[d]()}}else b=a.map(function(a){return a.__iter__()}),c=b.map(function(a){return a()});return c.slice(0)}})},"static product":function(a){return a=a?iterable(a):this.EMPTY,this.prototype.product.apply(a,Array.prototype.slice.call(arguments,1))},chain:function(){var a=Array.prototype.slice.call(arguments).map(iterable);return a.unshift(this),new Iterable(function(){var b=0,c=a[0].__iter__();return function(){for(;;)try{return c()}catch(d){if(!(d===STOP_ITERATION&&b+1<a.length))throw d;b++,c=a[b].__iter__()}throw STOP_ITERATION}})},"static chain":function(a){return a=a?iterable(a):this.EMPTY,this.prototype.chain.apply(a,Array.prototype.slice.call(arguments,1))},flatten:function(){var a=this;return new Iterable(function(){var b=a.__iter__(),c=this.stop;return function(){for(;;)try{return c()}catch(a){a===STOP_ITERATION&&(c=iterable(b()).__iter__())}throw STOP_ITERATION}})},nub:function(a){var b=[];return this.filter(function(c){if(a){for(var d=b.length-1;d>=0;--d)if(a(b[d],c))return!1}else if(b.indexOf(c)>=0)return!1;return b.push(c),!0})},union:function(){var a=[void 0].concat(Array.prototype.slice.call(arguments));return this.unionBy.apply(this,a)},unionBy:function(a){return this.chain.apply(this,Array.prototype.slice.call(arguments,1)).nub(a)},intersection:function(){var a=[void 0].concat(Array.prototype.slice.call(arguments));return this.intersectionBy.apply(this,a)},intersectionBy:function(a){for(var b=this.toArray(),c=1;c<arguments.length;++c)b=iterable(arguments[c]).filter(function(c){if(a){for(var d=b.length-1;d>=0;--d)if(a(b[d],c))return!0;return!1}return b.indexOf(c)>=0}).toArray();return iterable(b)},difference:function(){var a=[void 0].concat(Array.prototype.slice.call(arguments));return this.differenceBy.apply(this,a)},differenceBy:function(a){for(var b,c=this,d=1;d<arguments.length;++d)b=iterable(arguments[d]).toArray(),c=c.filter(function(c){if(a){for(var d=b.length-1;d>=0;--d)if(a(b[d],c))return!1;return!0}return b.indexOf(c)<0});return c},"static range":function(a,b,c){switch(arguments.length){case 0:a=0,b=0,c=1;break;case 1:b=a,a=0,c=1;break;case 2:c=1}return new Iterable(function(){var d,e=a;return function(){if(isNaN(e)||isNaN(b)||e>=b)throw STOP_ITERATION;return d=e,e+=c,d}})},"static repeat":function(a,b){return b=isNaN(b)?1/0:+b,new Iterable(function(){var c=b;return function(){if(c--,0>c)throw STOP_ITERATION;return a}})},"static iterate":function(a,b,c){return c=isNaN(c)?1/0:+c,new Iterable(function(){var d=c,e=b;return function(){if(d--,0>d)throw STOP_ITERATION;var b=e;return e=a(e),b}})},cycle:function(a){a=void 0===a?1/0:+a;var b=this;return new Iterable(function(){var c=a,d=b.__iter__();return function(){for(;c>0;)try{return d()}catch(a){if(!(a===STOP_ITERATION&&c>1))throw a;c--,d=b.__iter__()}throw STOP_ITERATION}})},toString:function(a){a=0|a||5;var b=this.take(a+1).toArray();return b.length>a?(b.pop(),"Iterable("+JSON.stringify(b).replace(/\]$/," ...]")+")"):"Iterable("+JSON.stringify(b)+")"}});Iterable.EMPTY=new Iterable(function(){return Iterable.prototype.stop});var iterable=exports.iterable=function(a){return"undefined"!=typeof a&&null!==a&&"function"==typeof a.__iter__?a:new Iterable(a)},Future=exports.Future=declare({constructor:function(a){this.state=0,this.callbacks=[[],[],[]],arguments.length>0&&this.resolve(a)},__future__:function(){return this},"static __isFuture__":function(a){return"undefined"!=typeof a&&null!==a&&"function"==typeof a.__future__},STATES:["pending","resolved","rejected","cancelled"],isPending:function(){return 0===this.state},isResolved:function(){return 1===this.state},isRejected:function(){return 2===this.state},isCancelled:function(){return 3===this.state},__complete__:function(a,b,c){return 0===this.state&&(this.state=c,this.__completion__=[a,b],this.callbacks[c-1].forEach(function(c){"function"==typeof c&&setTimeout(c.bind(a,b),1)})),this},resolve:function(a,b){return 0===this.state?this.__complete__(b||this,a,1):this},reject:function(a,b){if(0===this.state&&(this.__complete__(b||this,a,2),this.callbacks[1].length<1))throw a instanceof Error?a:new Error(a);return this},cancel:function(a){return 0===this.state?this.__complete__(this,a,3):this},toString:function(){return"Future:"+this.STATES[this.state]},__register__:function(a,b){if("function"==typeof a)return 0===this.state?this.callbacks[b-1].push(a):this.state===b&&setTimeout(a.bind(this.__completion__[0],this.__completion__[1]),1),this;throw new Error("Callback must be a function, and not ("+a+")!")},done:function(){for(var a=0;a<arguments.length;a++)this.__register__(arguments[a],1);return this},fail:function(){for(var a=0;a<arguments.length;a++)this.__register__(arguments[a],2);return this},__onCancel__:function(){for(var a=0;a<arguments.length;a++)this.__register__(arguments[a],3);return this},always:function(){return this.done.apply(this,arguments).fail.apply(this,arguments)},bind:function(a){return a.done(this.resolve.bind(this)),a.fail(this.reject.bind(this)),a.__onCancel__(this.cancel.bind(this)),this},then:function(a,b){var c=new Future;return this.done(function(b){try{b=a?a(b):b,__isFuture__(b)?c.bind(b.__future__()):c.resolve(b)}catch(d){c.reject(d)}}),this.fail(function(a){if(b)try{a=b(a),__isFuture__(a)?c.bind(a.__future__()):c.resolve(a)}catch(d){c.reject(d)}else c.reject(a)}),this.__onCancel__(c.cancel.bind(c)),c},"static when":function(a){return __isFuture__(a)?a.__future__():new Future(a)},"static then":function(a,b,c){return __isFuture__(a)?a.__future__().then(b,c):b(a)},"static invoke":function(a,b){try{return when(a.apply(b,Array.prototype.slice.call(arguments,2)))}catch(c){var d=new Future;return d.reject(c),d}},"static all":function(a){a=Array.isArray(a)?a:iterable(a).toArray();var b,c=new Future,d=a.length,e=new Array(d),f=function(a,b){e[a]=b,--d<1&&c.resolve(e)};if(1>d)c.resolve([]);else for(var g=0;g<a.length;g++)b=when(a[g]),b.done(f.bind(this,g)),b.fail(c.reject.bind(c)),b.__onCancel__(c.cancel.bind(c));return c},"static any":function(a){a=iterables.iterable(a).toArray();var b,c=new Future,d=a.length,e=new Array(d);if(1>d)c.reject();else for(var f=0;f<a.length;f++)b=when(a[f]),b.fail(function(a){return function(b){e[a]=b,d--,1>d&&c.reject(b)}}(f)),b.done(c.resolve.bind(c)),b.__onCancel__(c.cancel.bind(c));return c},"static sequence":function(a,b){var c,d=new Future,e=d.reject.bind(d),f=iterable(a).__iter__(),g=function h(a){try{return c=f(),b?when(c).then(b,e).then(h,e):when(c).then(h,e)}catch(g){g===STOP_ITERATION?d.resolve(a):d.reject(g)}};return g(),d},"static doWhile":function(a,b){function c(f){Future.invoke(b,null,f).then(function(b){b?Future.invoke(a,null,f).then(c,e):d.resolve(f)},e)}b=b||function(a){return!!a};var d=new Future,e=d.reject.bind(d);return Future.invoke(a).then(c,e),d},"static whileDo":function(a,b){return Future.invoke(a).then(function(c){return Future.doWhile(b,a)})},"static delay":function(a,b){a=isNaN(a)?10:Math.max(+a,10),b="undefined"==typeof b?Date.now():b;var c=new Future;return setTimeout(c.resolve.bind(c,b),a),c},"static retrying":function(a,b,c,d,e){return b=isNaN(b)?10:+b,1>b?Future.invoke(a):Future.invoke(a).then(void 0,function(){return c=isNaN(c)?100:+c,d=isNaN(d)?2:+d,e=isNaN(e)?3e5:+e,Future.delay(c).then(function(){return Future.retrying(a,b-1,Math.min(e,c*d),d,e)})})},"static imports":function(){var a=new Future;return require(Array.prototype.slice.call(arguments),function(){a.resolve(Array.prototype.slice.call(arguments))},function(b){a.reject(b)}),a}}),when=Future.when,__isFuture__=Future.__isFuture__,HttpRequest=exports.HttpRequest=declare({constructor:function(){this.__request__=new XMLHttpRequest},request:function(a,b,c,d,e,f){var g=this.__request__,h=new Future;return g.open(a,b,!0,e,f),d&&Object.getOwnPropertyNames(d).forEach(function(a){g.setRequestHeader(a,d[a])}),g.onreadystatechange=function(){4==g.readyState&&(200==g.status?h.resolve(g):h.reject(g))},g.send(c),h},get:function(a,b,c,d,e){return this.request("GET",a,b,c,d,e)},getText:function(a,b,c,d,e){return this.get(a,b,c,d,e).then(function(a){return a.responseText})},getJSON:function(a,b,c,d,e){return this.get(a,b,c,d,e).then(function(a){return JSON.parse(a.responseText)})},post:function(a,b,c,d,e){return this.request("POST",a,b,c,d,e)},postJSON:function(a,b,c,d,e){return c=c||{},c["Content-Type"]="application/json",this.post(a,JSON.stringify(b)||"null",c,d,e)}});["request","get","getJSON","getText","post","postJSON"].forEach(function(a){HttpRequest[a]=function(){return HttpRequest.prototype[a].apply(new HttpRequest,arguments)}});var Parallel=exports.Parallel=declare({constructor:function b(a){a||(a=b.newWorker()),a.onmessage=this.__onmessage__.bind(this),this.worker=a},"static newWorker":function newWorker(){var src="self.base = ("+exports.__init__+")();self.onmessage = ("+function(msg){try{self.base.Future.when(eval(msg.data)).then(function(a){self.postMessage(JSON.stringify({result:a}))})}catch(err){self.postMessage(JSON.stringify({error:err+""}))}}+");",blob=new Blob([src],{type:"text/javascript"});return new Worker(URL.createObjectURL(blob))},__onmessage__:function(a){var b=this.__future__;if(b){this.__future__=null;try{var c=JSON.parse(a.data);c.error?b.reject(c.error):b.resolve(c.result)}catch(d){b.reject(d)}}},run:function(a){if(this.__future__)throw new Error("Worker is working!");return this.__future__=new Future,this.worker.postMessage(a+""),this.__future__},"static run":function(a){var b=new Parallel;return b.run(a).always(function(){b.worker.terminate()})},loadModule:function(a,b){var c=this;return Future.sequence(b?a.__dependencies__:[],function(a){return c.loadModule(a,b)}).then(function(){return c.run("self."+a.__name__+" || (self."+a.__name__+"=("+a.__init__+")("+a.__dependencies__.map(function(a){return a.__name__}).join(",")+')), "OK"')})}}),Events=exports.Events=declare({constructor:function(a){initialize(this,a).number("maxListeners",{defaultValue:1/0,coerce:!0,minimum:1}).bool("isOpen",{defaultValue:!0});var b=this.__listeners__={};a&&Array.isArray(a.events)&&a.events.forEach(function(a){b[a]=[]})},listeners:function(a){return this.__listeners__.hasOwnProperty(a)?this.__listeners__[a].slice():[]},emit:function(a){var b;if(Array.isArray(a)){var c=this;b=Array.prototype.slice.call(arguments),a.forEach(function(a){b[0]=a,c.emit.apply(this,b)})}if(!this.__listeners__.hasOwnProperty(a))return!1;b=Array.prototype.slice.call(arguments,1);this.__listeners__[a];return this.__listeners__[a]=this.__listeners__[a].filter(function(a){return a[1]>0?(setTimeout(function(){return a[0].apply(global,b)},1),a[1]--,a[1]>0):!1}),!0},on:function(a,b,c){if(Array.isArray(a)){var d=this;a.forEach(function(a){d.on(a,b,c)})}else{this.__listeners__.hasOwnProperty(a)||(raiseIf(!this.isOpen,"Event ",a," is not defined."),this.__listeners__[a]=[]);var e=this.__listeners__[a];raiseIf(this.listeners.length>=this.maxListeners,"Cannot have more than ",this.maxListeners," listeners for event ",a,"."),c=+c||1/0,e.push([b,c])}},once:function(a,b){return this.on(a,b,1)},off:function(a,b){if(Array.isArray(a)){var c=this;a.forEach(function(a){c.off(a,b)})}else this.__listeners__.hasOwnProperty(a)&&(this.__listeners__[a]=this.__listeners__[a].filter(function(a){
return a[0]!==b}))}}),Randomness=exports.Randomness=declare({constructor:function(a){"function"==typeof a&&(this.__random__=a)},__random__:Math.random,random:function(){var a=this.__random__();switch(arguments.length){case 0:return a;case 1:return a*arguments[0];default:return(1-a)*arguments[0]+a*arguments[1]}},randomInt:function(){return Math.floor(this.random.apply(this,arguments))},randomBool:function(a){return this.random()<(isNaN(a)?.5:+a)},randoms:function(a){var b,c=Array.prototype.slice.call(arguments,1),d=[];for(a=+a,b=0;a>b;b++)d.push(this.random.apply(this,c));return d},choice:function(a){return a=arguments.length>1?Array.prototype.slice.call(arguments):Array.isArray(a)?a:iterable(a).toArray(),a.length<1?void 0:a[this.randomInt(a.length)]},choices:function(a,b){return this.split.apply(this,arguments)[0]},split:function(a,b){b=arguments.length>2?Array.prototype.slice.call(arguments):iterable(b).toArray();var c=[];for(a=Math.min(b.length,Math.max(+a,0));a>0;a--)c=c.concat(b.splice(this.randomInt(b.length),1));return[c,b]},shuffle:function(a){return this.choices(a.length,a)},normalizeWeights:function(a){a=iterable(a);var b=0,c=1/0,d=0;return a.forEachApply(function(a,e){raiseIf(0>e,"Cannot normalize with negative weights!"),b+=e,c>e&&(c=e),d++}),b-=c*d,a.mapApply(function(a,d){return[a,(d-c)/b]})},weightedChoice:function(a){var b,c=this.random();return iterable(a).forEachApply(function(a,d){c-=d,0>=c&&(b=a,Iterable.stop())}),b},weightedChoices:function(a,b){b=iterable(b).toArray();for(var c,d=1,e=[],f=0;a>f;++f)c=this.random(d),iterable(b).forEachApply(function(a,f,g){c-=f,0>=c&&(e.push(a),d-=f,b.splice(g,1),Iterable.stop())});return e},averagedDistribution:function(a){a=Math.max(+a,2);var b=this.__random__;return new Randomness(function(){for(var c=0,d=0;a>d;d++)c+=b();return c/a})},"static __SERMAT__":{identifier:"Randomness",serializer:function(a){return a.__random__!==Math.random?[a.__random__]:[]},materializer:function(a,b){return b&&(b.length<1?Randomness.DEFAULT:new Randomness(b[0]))}}});Randomness.DEFAULT=new Randomness,["random","randomInt","randomBool","choice","split","choices","shuffle","averagedDistribution"].forEach(function(a){Randomness[a]=Randomness.DEFAULT[a].bind(Randomness.DEFAULT)});var LinearCongruential=Randomness.LinearCongruential=declare(Randomness,{constructor:function(a,b,c,d){var e=isNaN(d)?Date.now():Math.floor(d);this.__arguments__=[a,b,c,e],this.__random__=function(){return(e=(b*e+c)%a)/a}},"static __SERMAT__":{identifier:"LinearCongruential",serializer:function(a){return a.__arguments__}},"static numericalRecipies":function(a){return new LinearCongruential(4294967295,1664525,1013904223,a)},"static borlandC":function(a){return new LinearCongruential(4294967295,22695477,1,a)},"static glibc":function(a){return new LinearCongruential(4294967295,1103515245,12345,a)}});Randomness.MersenneTwister=function(){function a(a){return 0>a?a+4294967296:a}function b(b){var c,d=new Array(624);d[0]=c=b;for(var e=1;624>e;++e)d[e]=c=(1812433253*a(c^c<<30)+e)%4294967295;return d}function c(b){for(var c=0;624>c;++c){var d=2147483648&b[c]|2147483647&b[(c+1)%624];b[c]=a(b[(c+397)%624]^2*d),0!==(1&d)&&(b[c]=a(2567483615^b[c]))}}return declare(Randomness,{constructor:function(d){this.__seed__=isNaN(d)?Date.now():Math.floor(d);var e=b(this.__seed__),f=0;this.__random__=function(){0===f&&c(e);var b=e[f];return b=a(b^b<<11),b=a(b^b>>>7&2636928640),b=a(b^b>>>15&4022730752),b=a(b^b<<18),f=(f+1)%624,b/4294967295}},"static __SERMAT__":{identifier:"MersenneTwister",serializer:function(a){return[a.__seed__]}}})}();var Chronometer=exports.Chronometer=declare({constructor:function(a){this.reset(a)},reset:function(a){return this.__timestamp__=a||Date.now()},time:function(){return Date.now()-this.__timestamp__},tick:function(a){var b=this.time();return this.reset(a),b},chronometer:function(a,b){b=b||1;for(var c=0,d=0;b>d;d++)this.reset(),a.call(this),c+=this.time();return c/b}}),Statistic=exports.Statistic=declare({constructor:function(a){"undefined"!=typeof a&&(this.keys="object"==typeof a?null!==a?a:"":a+""),this.reset()},reset:function(){return this.__count__=0,this.__sum__=0,this.__sqrSum__=0,this.__min__=1/0,this.__max__=-(1/0),this.__minData__=void 0,this.__maxData__=void 0,this},applies:function(a){if("undefined"==typeof a)return!1;if(null===a&&(a=""),"undefined"==typeof this.keys)return!1;if("object"==typeof this.keys){var b;if("object"==typeof a){if(Array.isArray(this.keys)&&Array.isArray(a)){for(b in a)if(this.keys.indexOf(a[b])<0)return!1}else for(b in a)if("undefined"==typeof this.keys[b]||a[b]!==this.keys[b])return!1;return!0}return!1}return"object"!=typeof a&&this.keys===a+""},count:function(){return this.__count__},sum:function(){return this.__sum__},squareSum:function(){return this.__sqrSum__},minimum:function(){return this.__min__},maximum:function(){return this.__max__},minData:function(){return this.__minData__},maxData:function(){return this.__maxData__},average:function(){var a=this.count();return a>0?this.sum()/a:0},variance:function(a,b){isNaN(b)&&(b=this.average());var c=this.count(),d=c>1?b*b+(this.squareSum()-2*b*this.sum())/c:0;return a||2>c?d:d*c/(c-1)},standardDeviation:function(a,b){return Math.sqrt(this.variance(b),a)},add:function(a,b){return void 0===a?a=1:isNaN(a)&&raise("Statistics.add(): Value ",a," cannot be added."),this.__count__+=1,this.__sum__+=a,this.__sqrSum__+=a*a,this.__min__>a&&(this.__min__=a,this.__minData__=b),this.__max__<a&&(this.__max__=a,this.__maxData__=b),this},addAll:function(a,b){for(var c=0;c<a.length;c++)this.add(a[c],b);return this},gain:function(a,b,c){return b=isNaN(b)?this.DEFAULT_GAIN_FACTOR:+b,this.__count__*=b,this.__sum__*=b,this.__sqrSum__*=b,this.add(a,c)},DEFAULT_GAIN_FACTOR:.99,gainAll:function(a,b,c){for(var d=0;d<a.length;d++)this.gain(a[d],b,c);return this},addStatistic:function(a){return this.__count__+=a.__count__,this.__sum__+=a.__sum__,this.__sqrSum__+=a.__sqrSum__,a.__min__<this.__min__&&(this.__min__=a.__min__,this.__maxData__=a.__maxData__),a.__max__>this.__max__&&(this.__max__=a.__max__,this.__maxData__=a.__maxData__),this},startTime:function(a){var b=this.__chronometer__||(this.__chronometer__=new Chronometer);return b.reset(a)},addTime:function(a){return raiseIf(!this.__chronometer__,"Statistic's chronometer has not been started."),this.add(this.__chronometer__.time(),a)},addTick:function(a){return raiseIf(!this.__chronometer__,"Statistic's chronometer has not been started."),this.add(this.__chronometer__.tick(),a)},"static z_test":function(a,b,c,d){var e={},f=e.z=(d-a)/Math.sqrt(b/c),g=math.gauss_cdf(f);return e.p_lessThan=0>f?g:0,e.p_greaterThan=f>0?1-g:0,e.p_notEqual=0!==f?2*Math.max(e.p_lessThan,e.p_greaterThan):0,e},z_test:function(a,b){return b=isNaN(b)?this.variance():+b,Statistic.z_test(a,b,this.count(),this.average())},"static t_test1":function(a,b,c,d){return{t:(c-a)/d*Math.sqrt(b)}},t_test1:function(a,b,c,d){return Statistic.t_test1(isNaN(a)?0:+a,isNaN(b)?this.count():+b,isNaN(c)?this.average():+c,isNaN(d)?this.standardDeviation():+d)},"static t_test2":function(a,b,c,d,e,f){var g=((a-1)*e+(b-1)*f)/(a+b-2);return{t:(c-d)/Math.sqrt(g*(1/a+1/b))}},t_test2:function(a){return Statistic.t_test2(this.count(),a.count(),this.average(),a.average(),this.variance(),a.variance())},toString:function(a){a=""+(a||"	");var b="object"!=typeof this.keys?this.keys+"":iterable(this.keys).map(function(a){return a[0]+":"+a[1]}).join(", ");return[b,this.count(),this.minimum(),this.average(),this.maximum(),this.standardDeviation()].join(a)},"static __SERMAT__":{identifier:"Statistic",serializer:function(a){var b=[a.keys||null,a.__count__,a.__sum__,a.__sqrSum__,a.__min__,a.__max__];return"undefined"!=typeof a.__minData__?b.concat([a.__minData__,a.__maxData__]):b},materializer:function(a,b){if(!b)return null;var c=b[0]?new Statistic(b[0]):new Statistic;return c.__count__=+b[1],c.__sum__=+b[2],c.__sqrSum__=+b[3],c.__min__=+b[4],c.__max__=+b[5],c.__count__>0&&(c.__minData__=b[6],c.__maxData__=b[7]),c}}}),Statistics=exports.Statistics=declare({constructor:function(){this.__stats__={}},__id__:function(a){return"object"==typeof a&&null!==a?Array.isArray(a)?JSON.stringify(a.slice().sort()):Object.keys(a).sort().map(function(b){return JSON.stringify(b)+":"+JSON.stringify(a[b])}).join(","):JSON.stringify(a)+""},stats:function(a){return iterable(this.__stats__).map(function(a){return a[1]},function(b){return b.applies(a)}).toArray()},stat:function(a){var b=this.__id__(a);return this.__stats__[b]||(this.__stats__[b]=new Statistic(a))},addObject:function(a,b){raiseIf(!a,"Cannot add object "+JSON.stringify(a)+".");for(var c in a)Array.isArray(a[c])?this.addAll(c,a[c],b):this.add(c,a[c],b);return this},addStatistic:function(a,b){return this.stat("undefined"!=typeof b?b:a.keys).addStatistic(a)},addStatistics:function(a,b){var c=this;return a.stats(b).forEach(function(a){c.stat(a.keys).addStatistic(a)}),this},reset:function(a){return this.stats(a).forEach(function(a){a.reset()}),this},add:function(a,b,c){return this.stat(a).add(b,c)},gain:function(a,b,c,d){return this.stat(a).gain(b,c,d)},addAll:function(a,b,c){return this.stat(a).addAll(b,c)},gainAll:function(a,b,c,d){return this.stat(a).addAll(b,d)},startTime:function(a,b){return this.stat(a).startTime(b)},addTime:function(a,b){return this.stat(a).addTime(b)},addTick:function(a,b){return this.stat(a).addTick(b)},accumulation:function(a){var b=new Statistic(a);return this.stats(a).forEach(function(a){b.addStatistic(a)}),b},count:function(a){return this.accumulation(a).count()},sum:function(a){return this.accumulation(a).sum()},squareSum:function(a){return this.accumulation(a).squareSum()},minimum:function(a){return this.accumulation(a).minimum()},maximum:function(a){return this.accumulation(a).maximum()},average:function(a){return this.accumulation(a).average()},variance:function(a,b){return this.accumulation(a).variance(b)},standardDeviation:function(a,b){return this.accumulation(a).standardDeviation(b)},toString:function(a,b){a=""+(a||"	"),b=""+(b||"\n");var c=this.__stats__;return Object.keys(c).map(function(b){return c[b].toString(a)}).join(b)},"static __SERMAT__":{identifier:"Statistics",serializer:function(a){var b=a.__stats__;return Object.keys(b).map(function(a){return b[a]})},materializer:function(a,b){if(!b)return null;var c=new Statistics;return b.forEach(function(a){c.addStatistic(a)}),c}}}),Logger=exports.Logger=declare({constructor:function c(a,b,d){this.name=""+a,this.parent=b||c.ROOT,this.level=d||"INFO",this.appenders=[]},log:function(a){var b=this.LEVELS[this.level]<=this.LEVELS[a];if(b){var c=this,d=Array.prototype.slice.call(arguments,1).join("");this.appenders.forEach(function(b){var e=b.format||c.defaultFormat;b(e(c.name,new Date,a,d))}),this.parent&&this.parent.log.apply(this.parent,arguments)}return b},LEVELS:{TRACE:-(1/0),DEBUG:-1,INFO:0,WARN:1,ERROR:2,FATAL:1/0,OK:0,FAIL:1,TODO:1,FIXME:1},trace:function(){return this.log("TRACE",Array.prototype.slice.call(arguments,0).join(""))},debug:function(){return this.log("DEBUG",Array.prototype.slice.call(arguments,0).join(""))},info:function(){return this.log("INFO",Array.prototype.slice.call(arguments,0).join(""))},warn:function(){return this.log("WARN",Array.prototype.slice.call(arguments,0).join(""))},error:function(){return this.log("ERROR",Array.prototype.slice.call(arguments,0).join(""))},fatal:function(){return this.log("FATAL",Array.prototype.slice.call(arguments,0).join(""))},defaultFormat:function(a,b,c,d){return[c,a,Text.formatDate(b,"hhnnss.SSS"),d].join(" ")},htmlFormat:function(a,b){return a=a||"p",b=b||"log_",function(c,d,e,f){return["<",a,' class="',b,e,'">','<span class="',b,'level">',e,"</span> ",'<span class="',b,'name">',c,"</span> ",'<span class="',b,'time">',Text.formatDate(d,"hhnnss.SSS"),"</span> ",'<span class="',b,'message">',Text.escapeXML(f).replace(/\n/g,"<br/>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;"),"</span>","</",a,">"].join("")}},appendToConsole:function(){function a(a){console.log(a)}return function(){return this.appenders.push(a),a}}(),appendToFile:function(a,b,c){function d(a){e.write(a+"\n")}a=a||"./log"+(new Date).format("yyyymmdd-hhnnss")+".log",b=void 0!==b?b:"a",c=void 0!==c?c:"utf-8";var e=require("fs").createWriteStream(a,{flags:b,encoding:c});return this.appenders.push(d),d},appendToHtml:function(a,b,c){function d(d){if(c)for(e.unshift(d);e.length>b;)e.pop();else for(e.push(d);e.length>b;)e.shift();a.innerHTML=e.join("\n")}b=+b||1/0,c=!!c,a="string"==typeof a?document.getElementById(a):a||document.getElementsByTagName("body")[0];var e=[];return this.appenders.push(d),d},appendAsWorkerMessages:function(a){function b(b){var c={};c[a]=b,self.postMessage(JSON.stringify(c))}return a=""+(a||"log"),b.format=function(a,b,c,d){return{name:a,time:b,level:c,message:d}},this.appenders.push(b),b},stats:function(){return this.__stats__||(this.__stats__=new Statistics)}});return Logger.ROOT=new Logger(""),[Randomness,Randomness.LinearCongruential,Randomness.MersenneTwister,Statistic,Statistics].forEach(function(a){a.__SERMAT__.identifier=exports.__package__+"."+a.__SERMAT__.identifier,exports.__SERMAT__.include.push(a)}),exports});
//# sourceMappingURL=creatartis-base.min.js.map